#First build a previous anaconda image
cd conda_req
sudo docker build --network=host -t stable_diffusion_conda_req .

#Build
sudo docker build --network=host -t stable_diffusion .
#RUN
sudo  docker run -it -v "$(pwd)":/tf/mnt/ --rm --gpus all stable_diffusion /bin/bash
#run stablediffusion
python scripts/txt2img.py \
--prompt "a professional photograph of an astronaut riding a horse" \
--ckpt /tf/weights/512-base-ema.ckpt \
--config configs/stable-diffusion/v2-inference-v.yaml \
--H 768 --W 768

python scripts/txt2img.py \
--prompt "a professional photograph of an astronaut riding a horse" \
--ckpt /tf/weights/512-base-ema.ckpt \
--config configs/stable-diffusion/v2-inference-v.yaml 


sudo docker tag gpu_mljar bsaldivar/gpu_mljar:0.11.3
#push
sudo docker push bsaldivar/gpu_mljar:0.11.3

#pull
sudo docker pull bsaldivar/gpu_mljar:0.11.3

#Run
sudo  docker run -it -v "$(pwd)":/tf/mnt/ --rm --gpus all -p 9999:8888 gpu_mljar

#Run command line
sudo  docker run -it -v "$(pwd)":/tf/mnt/ --rm --gpus all bsaldivar/gpu_mljar:0.11.3 /bin/bash
